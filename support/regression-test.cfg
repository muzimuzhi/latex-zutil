\ExplSyntaxOn

% hacks to get an engine-neutral error-like message type

% new message level "errorx" which works like "info" but
% uses "Package ... Error" header
\cs_new_protected:Npn \__msg_errorx_code:nnnnnn #1#2#3#4#5#6
  {
    \__msg_info_aux:NNnnnnnn \iow_term:n \msg_errorx_text:n
      {#1} {#2} {#3} {#4} {#5} {#6}
  }

\prop_new:N \l__msg_redirect_errorx_prop

\cs_new:Npn \msg_errorx_text:n { !~\msg_error_text:n }

% redirect tabularray errors to the new type
\msg_redirect_module:nnn { tabularray } { error } { errorx }

% it's recommended to load l3backend-<engine>.def as early as possible
\sys_ensure_backend:
% l3debug.def will slower following latex3 codes a bit, so load it at a
% no-too-late stage
\hook_gput_code:nnn { begindocument } { test }
  { \sys_load_debug: }

% trigger font info lines
\setbox0=\hbox{$a$}

\ExplSyntaxOff
